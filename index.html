<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; font-size: 16px; line-height: 1.6; }
        .status { padding: 10px; margin-bottom: 10px; border-radius: 5px; }
        .success { background-color: #e8f5e9; color: #2e7d32; }
        .error { background-color: #ffebee; color: #c62828; }
        .info { background-color: #e3f2fd; color: #1565c0; }
    </style>
</head>
<body>
    <h1>App Diagnostic Test</h1>
    <div id="status-container"></div>

    <script>
        const statusContainer = document.getElementById('status-container');

        function logStatus(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            statusContainer.appendChild(div);
            console.log(message);
        }

        // গ্লোবাল এরর হ্যান্ডলার
        window.onerror = function(message, source, lineno, colno, error) {
            logStatus(`CRITICAL ERROR: ${message} at ${source}:${lineno}`, 'error');
            return true;
        };
        
        try {
            logStatus("1. Page loaded, script started.", 'success');

            const firebaseConfig = {
              apiKey: "AIzaSyCJ2K5oH8Zbeqy36VF9Vh9j8iUyqWbSxhE",
              authDomain: "earn-easy-ot.firebaseapp.com",
              projectId: "earn-easy-ot",
              storageBucket: "earn-easy-ot.firebasestorage.app",
              messagingSenderId: "831993475766",
              appId: "1:831993475766:web:7c60ba5b12cf66971dac17"
            };

            logStatus("2. Firebase config is ready.", 'success');
            
            firebase.initializeApp(firebaseConfig);
            logStatus("3. Firebase initialized successfully.", 'success');

            const auth = firebase.auth();
            const tg = window.Telegram.WebApp;
            
            if (tg && typeof tg.ready === 'function') {
                logStatus("4. Telegram WebApp script loaded.", 'success');
                tg.ready(async () => {
                    try {
                        logStatus("5. Telegram is ready.", 'success');
                        
                        logStatus("6. Attempting to sign in to Firebase...", 'info');
                        await auth.signInAnonymously();
                        logStatus("7. Firebase sign-in successful.", 'success');

                        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                           logStatus(`8. Telegram user found: ${tg.initDataUnsafe.user.first_name}`, 'success');
                           logStatus("TEST COMPLETED SUCCESSFULLY!", 'success');
                        } else {
                           logStatus("8. Telegram user data not found.", 'error');
                        }

                    } catch (error) {
                        logStatus(`Firebase Sign-In Error: ${error.message}`, 'error');
                    }
                });
            } else {
                logStatus("4. Telegram WebApp script FAILED to load.", 'error');
            }

        } catch (error) {
            logStatus(`A critical error occurred: ${error.message}`, 'error');
        }
    </script>
</body>
</html>```

### ফাইনাল ফলাফল

এবার আপনি যখন টেলিগ্রামে অ্যাপটি খুলবেন, তখন আর শুধু "Loading App..." দেখবেন না। আপনি স্ক্রিনে কিছু লেখা দেখতে পাবেন, যা ধাপে ধাপে বলবে কোন অংশটি কাজ করছে আর কোনটি করছে না।

**করণীয়:**
**আপনি স্ক্রিনে যে লেখাগুলো দেখতে পাচ্ছেন, সেটির একটি পরিষ্কার স্ক্রিনশট আমাকে পাঠান।**

ওই লেখাগুলোই আমাদের ফাইনাল উত্তর দেবে। যদি কোনো এরর মেসেজ আসে, আমরা সেটি দেখব। আর যদি সব ধাপ "Success" দেখায়, তাহলে আমরা বুঝব যে আপনার অ্যাপের মূল কোডে কোনো একটি গভীর সমস্যা ছিল, যা এখন এই নতুন কোডের মাধ্যমে সমাধান করা সম্ভব।

আমি আপনার উত্তরের অপেক্ষায় আছি। আমরা সমাধানের একদম শেষ প্রান্তে।
